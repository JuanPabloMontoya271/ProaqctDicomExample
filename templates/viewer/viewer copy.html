<!-- 
    <!DOCTYPE HTML>
<html>
<head>
   
    <link href="{{url_for('static', filename ='/bootstrap.min.css')}}"></script>
</head>
<body>
<div class="container">

    <div id="loadProgress">Image Load Progress:</div>

    <div class="row">
        <form id="form" class="form-horizontal">
            <div class="form-group">
                <label class="control-label col-sm-1" for="wadoURL">URL</label>
                <div class="col-sm-8">
                    <input class="form-control" type="text" id="wadoURL" placeholder="Enter WADO URL" value="http://127.0.0.1:5000/get-image/img2.dcm">
                </div>
                <div class="col-sm-3">
                    <button class="form-control" type="button" id="downloadAndView" class="btn btn-primary">Download and View</button>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-2">
                    <button class="form-control" type="button" id="load" class="btn btn-primary">Load</button>
                </div>
                <div class="col-sm-2">
                    <button class="form-control" type="button" id="unload" class="btn btn-primary">Unload</button>
                </div>
                <div class="col-sm-2">
                    <button class="form-control" type="button" id="purge" class="btn btn-primary">Purge Cache</button>

                </div>
                <div class="col-sm-2">
                    <button class="form-control" type="button" id="RectRoi" class="btn btn-primary">RectRoi</button>
                    
                </div>
                <div class="col-sm-2">
                    <button class="form-control" type="button" id="length" class="btn btn-primary">Length</button>
                    
                </div>
                <div class="col-sm-2">
                    <button class="form-control" type="button" id="EllipseRoi" class="btn btn-primary">RectRoi</button>
                    
                </div>
            </div>
        </form>
    </div>
    <input type="checkbox" id="toggleModalityLUT">Apply Modality LUT</input>
    <input type="checkbox" id="toggleVOILUT">Apply VOI LUT</input>
    <br>
    <button type="button" id="hide">hide</button>
    <div class="row">
        <div class="col-md-6">
            
                <div style="position:relative;color: white;"
                oncontextmenu="return false"
                class='disable-selection noIbar'
                unselectable='on'
                onselectstart='return false;'
                onmousedown='return false;'>
               <div id="dicomImage"
                    style="width:500px;height:500px">
               </div>
               
          
              </div>
              

        </div>
        <div class="col-md-6">
            <span>Transfer Syntax: </span><span id="transferSyntax"></span><br>
            <span>SOP Class: </span><span id="sopClass"></span><br>
            <span>Samples Per Pixel: </span><span id="samplesPerPixel"></span><br>
            <span>Photometric Interpretation: </span><span id="photometricInterpretation"></span><br>
            <span>Number Of Frames: </span><span id="numberOfFrames"></span><br>
            <span>Planar Configuration: </span><span id="planarConfiguration"></span><br>
            <span>Rows: </span><span id="rows"></span><br>
            <span>Columns: </span><span id="columns"></span><br>
            <span>Pixel Spacing: </span><span id="pixelSpacing"></span><br>
            <span>Row Pixel Spacing: </span><span id="rowPixelSpacing"></span><br>
            <span>Column Pixel Spacing: </span><span id="columnPixelSpacing"></span><br>
            <span>Bits Allocated: </span><span id="bitsAllocated"></span><br>
            <span>Bits Stored: </span><span id="bitsStored"></span><br>
            <span>High Bit: </span><span id="highBit"></span><br>
            <span>Pixel Representation: </span><span id="pixelRepresentation"></span><br>
            <span>WindowCenter: </span><span id="windowCenter"></span><br>
            <span>WindowWidth: </span><span id="windowWidth"></span><br>
            <span>RescaleIntercept: </span><span id="rescaleIntercept"></span><br>
            <span>RescaleSlope: </span><span id="rescaleSlope"></span><br>
            <span>Basic Offset Table Entries: </span><span id="basicOffsetTable"></span><br>
            <span>Fragments: </span><span id="fragments"></span><br>
            <span>Max Stored Pixel Value: </span><span id="minStoredPixelValue"></span><br>
            <span>Min Stored Pixel Value: </span><span id="maxStoredPixelValue"></span><br>
            <span>Total Time: </span><span id="totalTime"></span><br>
            <span>Load Time: </span><span id="loadTime"></span><br>
            <span>Decode Time: </span><span id="decodeTime"></span><br>
        </div>
        
<button id ="launch" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
    Launch demo modal
  </button>
  
  
  <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
          
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            
            <span aria-hidden="true">&times;</span>
          </button>
          <button type ="button" id="loadButton">
              load
          </button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
        <div id= "data-placeholder" class="col-md-6">
            
            
        </div>
    </div>
</div>
</body>


<script src="{{url_for('static', filename ='/cornerstone.min.js')}}"></script>
<SCRIPT src="{{url_for('static',filename = '/cornerstoneMath.min.js')}}"></SCRIPT>
<SCRIPT src="{{url_for('static', filename ='/cornerstoneTools.min.js')}}"></SCRIPT>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="{{url_for('static',filename ='/dicomParser.min.js' )}}"></script>


<script src="../../dist/cornerstoneWADOImageLoader.js"></script>

<script src="{{url_for('static', filename ='/viewer/uids.js')}}"></script>

<script>window.cornerstoneWADOImageLoader || document.write('<script src="https://unpkg.com/cornerstone-wado-image-loader">\x3C/script>')</script>
<script src="url_for('static', filename ='/utils/initializeWebWorkers.js')"></script>

<script>
    let res;
    let loadedData =false; 
    let hidden = true;
    cornerstoneWADOImageLoader.external.cornerstone = cornerstone;

    cornerstoneWADOImageLoader.configure({
        beforeSend: function(xhr) {
            // Add custom headers here (e.g. auth tokens)
            //xhr.setRequestHeader('APIKEY', 'my auth token');
        }
    });

    var loaded = false;

    function loadAndViewImage(imageId) {
        var element = document.getElementById('dicomImage');

        try {
            var start = new Date().getTime();
            cornerstone.loadAndCacheImage(imageId).then(function(image) {
                console.log(image);
                var viewport = cornerstone.getDefaultViewportForImage(element, image);
                
                document.getElementById('toggleModalityLUT').checked = (viewport.modalityLUT !== undefined);
                document.getElementById('toggleVOILUT').checked = (viewport.voiLUT !== undefined);
                cornerstone.displayImage(element, image, viewport);
                if(loaded === false) {
                    console.log(cornerstoneTools);
                    cornerstoneTools.mouseInput.enable(element);
                    cornerstoneTools.mouseWheelInput.enable(element);
                    cornerstoneTools.rectangleRoi.activate(element, 1); // ww/wc is the default tool for left mouse button
                    cornerstoneTools.pan.activate(element, 2); // pan is the default tool for middle mouse button
                    cornerstoneTools.zoom.activate(element, 4); // zoom is the default tool for right mouse button
                    cornerstoneTools.zoomWheel.activate(element); // zoom is the default tool for middle mouse wheel
                    loaded = true;
                }

                function getTransferSyntax() {
                    const value = image.data.string('x00020010');
                    return value + ' [' + uids[value] + ']';
                }

                function getSopClass() {
                    const value = image.data.string('x00080016');
                    return value + ' [' + uids[value] + ']';
                }

                function getPixelRepresentation() {
                    const value = image.data.uint16('x00280103');
                    if(value === undefined) {
                        return;
                    }
                    return value + (value === 0 ? ' (unsigned)' : ' (signed)');
                }

                function getPlanarConfiguration() {
                    const value = image.data.uint16('x00280006');
                    if(value === undefined) {
                        return;
                    }
                    return value + (value === 0 ? ' (pixel)' : ' (plane)');
                }


                document.getElementById('transferSyntax').textContent = getTransferSyntax();
                document.getElementById('sopClass').textContent = getSopClass();
                document.getElementById('samplesPerPixel').textContent = image.data.uint16('x00280002');
                document.getElementById('photometricInterpretation').textContent = image.data.string('x00280004');
                document.getElementById('numberOfFrames').textContent = image.data.string('x00280008');
                document.getElementById('planarConfiguration').textContent = getPlanarConfiguration();
                document.getElementById('rows').textContent = image.data.uint16('x00280010');
                document.getElementById('columns').textContent = image.data.uint16('x00280011');
                document.getElementById('pixelSpacing').textContent = image.data.string('x00280030');
                document.getElementById('rowPixelSpacing').textContent = image.rowPixelSpacing;
                document.getElementById('columnPixelSpacing').textContent = image.columnPixelSpacing;
                document.getElementById('bitsAllocated').textContent = image.data.uint16('x00280100');
                document.getElementById('bitsStored').textContent = image.data.uint16('x00280101');
                document.getElementById('highBit').textContent = image.data.uint16('x00280102');
                document.getElementById('pixelRepresentation').textContent = getPixelRepresentation();
                document.getElementById('windowCenter').textContent = image.data.string('x00281050');
                document.getElementById('windowWidth').textContent = image.data.string('x00281051');
                document.getElementById('rescaleIntercept').textContent = image.data.string('x00281052');
                document.getElementById('rescaleSlope').textContent = image.data.string('x00281053');
                document.getElementById('basicOffsetTable').textContent = image.data.elements.x7fe00010.basicOffsetTable ? image.data.elements.x7fe00010.basicOffsetTable.length : '';
                document.getElementById('fragments').textContent = image.data.elements.x7fe00010.fragments ? image.data.elements.x7fe00010.fragments.length : '';
                document.getElementById('minStoredPixelValue').textContent = image.minPixelValue;
                document.getElementById('maxStoredPixelValue').textContent = image.maxPixelValue;
                var end = new Date().getTime();
                var time = end - start;
                document.getElementById('totalTime').textContent = time + "ms";
                document.getElementById('loadTime').textContent = image.loadTimeInMS + "ms";
                document.getElementById('decodeTime').textContent = image.decodeTimeInMS + "ms";

            }, function(err) {
                alert(err);
            });
        }
        catch(err) {
            alert(err);
        }
    }
    function displayData(res){
        for (var element in res){
        let title =document.createElement("b")
                    title.textContent=`ROI Id: ${element}`
                    document.getElementById("data-placeholder").append(title)
                    document.getElementById("data-placeholder").append(document.createElement("br"))
                    for (var el in res[element]){
                        let child  =document.createElement("span")
                        
                        child.textContent = el+" : "+ res[element][el]

                        document.getElementById("data-placeholder").append(child)
                        document.getElementById("data-placeholder").append(document.createElement("br"))
                        
         
                    }}


    }
    function RoiBox(res){
        const c = document.getElementById("dicomImage").children[0]
                console.log(c);
                var width = c.width;
                var height = c.height;
                var ctx = c.getContext("2d");
                ctx.beginPath();
                ctx.lineWidth = "2";
                ctx.strokeStyle = "red";
                console.log(Object.keys(res));
                for (var element in res){
                    console.log(width, height);
                    console.log(res[element]);
                    let coords = res[element].coords
                    ctx.rect(coords[0],coords[1], coords[2], coords[3]);
                    ctx.stroke();
                    
                }


    }
    function reset(){

        let placeholder = document.getElementById("data-placeholder")
        placeholder.innerHTML=""
    }
    function downloadAndView() {
        document.getElementById("data-placeholder").innerHTML=''
        let name =document.getElementById("wadoURL").value.split("/")
        name = name[name.length-1]
        console.log(name);
        fetch("http://127.0.0.1:5000/get_segmentation/"+name).then(function(response){
            response.text().then(function(text) {
                console.log();
                res = JSON.parse(text)
                
               
            })
        })
        let url = document.getElementById('wadoURL').value;

        // prefix the url with wadouri: so cornerstone can find the image loader
        url = "wadouri:" + url;

        // image enable the dicomImage element and activate a few tools
        loadAndViewImage(url);
    }

    cornerstone.events.addEventListener('cornerstoneimageloadprogress', function(event) {
        const eventData = event.detail;
        const loadProgress = document.getElementById('loadProgress');
        loadProgress.textContent = `Image Load Progress: ${eventData.percentComplete}%`;
    });

    function getUrlWithoutFrame() {
        var url = document.getElementById('wadoURL').value;
        var frameIndex = url.indexOf('frame=');
        if(frameIndex !== -1) {
            url = url.substr(0, frameIndex-1);
        }
        return url;
    }

    var element = document.getElementById('dicomImage');
    cornerstone.enable(element);
    downloadAndView();
    function onImageRendered(e){
        if (!loadedData){
        displayData(res);
        loadedData = true
        }
        RoiBox(res);
        

        
    }
    document.getElementById("hide").addEventListener('click', function (e){
        if (hidden){
            document.getElementById("hidable").style.visibility="hidden";
            hidden =!hidden
        }
        else{
            document.getElementById("hidable").style.visibility="visible";
            hidden=!hidden
        }
        })
    document.getElementById("launch").addEventListener("click", (e)=>{
        console.log(e);
        downloadAndView();
    })
    element.addEventListener('cornerstoneimagerendered', onImageRendered);
    document.getElementById('downloadAndView').addEventListener('click', function(e) {
        downloadAndView();
    });
    document.getElementById('load').addEventListener('click', function(e) {
        var url = getUrlWithoutFrame();
        cornerstoneWADOImageLoader.wadouri.dataSetCacheManager.load(url);
    });
    document.getElementById('unload').addEventListener('click', function(e) {
        var url = getUrlWithoutFrame();
        cornerstoneWADOImageLoader.wadouri.dataSetCacheManager.unload(url);
    });

    document.getElementById('purge').addEventListener('click', function(e) {
        cornerstone.imageCache.purgeCache();
    });

    const form = document.getElementById('form');
    form.addEventListener('submit', function() {
        downloadAndView();
        return false;
    });

    document.getElementById('toggleModalityLUT').addEventListener('click', function() {
        var applyModalityLUT = document.getElementById('toggleModalityLUT').checked;
        console.log('applyModalityLUT=', applyModalityLUT);
        var image = cornerstone.getImage(element);
        var viewport = cornerstone.getViewport(element);
        if(applyModalityLUT) {
            viewport.modalityLUT = image.modalityLUT;
        } else {
            viewport.modalityLUT = undefined;
        }
        cornerstone.setViewport(element, viewport);
    });

    document.getElementById('toggleVOILUT').addEventListener('click', function() {
        var applyVOILUT = document.getElementById('toggleVOILUT').checked;
        console.log('applyVOILUT=', applyVOILUT);
        var image = cornerstone.getImage(element);
        var viewport = cornerstone.getViewport(element);
        if(applyVOILUT) {
            viewport.voiLUT = image.voiLUT;
        } else {
            viewport.voiLUT = undefined;
        }
        cornerstone.setViewport(element, viewport);
    });

    document.getElementById('toggleCollapseInfo').addEventListener('click', function() {
        if (document.getElementById('collapseInfo').style.display === 'none') {
            document.getElementById('collapseInfo').style.display = 'block';
        } else {
            document.getElementById('collapseInfo').style.display = 'none';
        }
    });
</script>
</html> 
-->
<!DOCTYPE HTML>
<html>

<head>
	<!-- support for mobile touch devices -->
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="../reset.css">
	<link rel="stylesheet" href="../app.css">
	<link rel="stylesheet" href="../icon-classes.css">
	<link rel="stylesheet" href="../tool-help.css">
</head>

<body>
	<div id="app">
		<div class="wrapper">
			<!-- Select Tool Category -->
			<ul class="tool-category-list">
				<li><a class="tools" data-category="tools" href="#">Tools</a></li>
			</ul>

			<!-- Select Active Tool -->
			<ul class="tool-category active" data-tool-category="tools">
				<li><a href="#" data-tool="StackScroll" data-tool-interaction="drag">Mouse stack</a></li>
				<li><a href="#" data-tool="StackScrollMouseWheel" data-tool-interaction="wheel">StackScrollMouseWheel</a></li>
			</ul>

			<!-- Our beautiful element targets -->
			<div class="cornerstone-element-wrapper-help">
				<div class="cornerstone-element-help" data-index="0" oncontextmenu="return false"></div>
				<div class="tool-help">
					<h1>Stack example</h1>
					<table>
						<tr>
							<td>
								<label for="nframes">Number of frames: </label>
								<input type="number" id="nframes" min="1" value="150">
							</td>
							<td>
								<button type="button" id="loadStackBtn">
									Load stack
								</button>
							</td>
					</table>
				</div>
			</div>
		</div>
	</div>
</body>



<!-- include the hammer.js library for touch gestures-->
<script src="https://unpkg.com/hammerjs@2.0.8/hammer.js"></script>
<!-- include Mousetrap to demo keyboard functionality -->
<script src="https://unpkg.com/mousetrap@1.6.2/mousetrap.js"></script>

<!-- include the cornerstone library -->
<script src="https://unpkg.com/cornerstone-core@2.2.6/dist/cornerstone.js"></script>
<script src="https://unpkg.com/cornerstone-math@0.1.6/dist/cornerstoneMath.js"></script>
<script src="../../dist/cornerstoneTools.js"></script>
<script>window.cornerstoneTools || document.write('<script src="https://unpkg.com/cornerstone-tools">\x3C/script>')</script>

<!-- include special code for these examples which provides images -->
<script src="../textImageLoader.js"></script>

<script>
	cornerstoneTools.init();

	function init() {
		const element = document.querySelector('.cornerstone-element-help');
		cornerstone.enable(element);
		element.tabIndex = 0;
		element.focus();
		const mouseButtonMask = 1;

		// Iterate over all tool-category links
		const toolCategoryLinks = document.querySelectorAll('ul.tool-category-list a');
		const toolCategorySections = document.querySelectorAll('ul.tool-category');
		Array.from(toolCategoryLinks).forEach(link => {
			//
			const categoryName = link.getAttribute('data-category');
			const categoryElement = document.querySelector(`section[data-tool-category="${categoryName}"]`)

			// Setup listener
			link.addEventListener('click', (evt) => {
				evt.preventDefault();
				setToolCategoryActive(categoryName);
			});
		})

		// Iterate over all tool buttons
		const toolButtons = document.querySelectorAll('a[data-tool]');
		Array.from(toolButtons).forEach(toolBtn => {
			// Add the tool
			const toolName = toolBtn.getAttribute('data-tool');
			const apiTool = cornerstoneTools[`${toolName}Tool`];

			if (apiTool) {
				cornerstoneTools.addTool(apiTool);
			} else {
				console.warn(`unable to add tool with name ${toolName}Tool`);
				console.log(cornerstoneTools)
			}

			toolBtn.addEventListener('click', (evt) => {
				const toolInteraction = evt.target.getAttribute('data-tool-interaction')
				const isInActive = !evt.target.classList.contains('active');
				if (isInActive) {
					setButtonActive(toolName, mouseButtonMask, toolInteraction);
					cornerstoneTools.setToolActive(toolName, { mouseButtonMask });
				} else {
					setButtonInActive(evt.target, mouseButtonMask, toolInteraction);
					cornerstoneTools.setToolDisabled(toolName);
				}
			});
		});

		cornerstoneTools.setToolActive('StackScroll', { mouseButtonMask });
		cornerstoneTools.setToolActive('StackScrollMouseWheel', { mouseButtonMask });
		setButtonActive('StackScroll', mouseButtonMask, 'drag');
		setButtonActive('StackScrollMouseWheel', mouseButtonMask, 'wheel');

		document.getElementById('loadStackBtn').onclick = loadStackCb;

		loadStack(150, element);
	}

	function setAllToolsPassive() {
		cornerstoneTools.store.state.tools.forEach((tool) => {
			cornerstoneTools.setToolPassive(tool.name);
		});
	}

	function loadStack(nFrames, element) {
		const n0 = Math.floor(nFrames / 2);
		const imageIds = (new Array(Number(nFrames)))
			.fill()
			.map(
				(_, i) => `example-n://${i}`
			);
		stack = {
			currentImageIdIndex: n0,
			imageIds
		};

		cornerstone.loadImage(imageIds[n0]).then(function (image) {
			cornerstone.displayImage(element, image);
			cornerstoneTools.addStackStateManager(element, ['stack']);
			cornerstoneTools.addToolState(element, 'stack', stack);
		});
	}

	function loadStackCb() {
		const nFrames = document.getElementById('nframes').value;
		const element = document.querySelector('.cornerstone-element-help');
		loadStack(nFrames, element);
	}

	const setToolCategoryActive = (categoryName) => {
		Array.from(toolCategoryLinks).forEach(toolLink => {
			if (categoryName === toolLink.getAttribute('data-category')) {
				toolLink.classList.remove('active');
				toolLink.classList.add('active');
			} else {
				toolLink.classList.remove('active');
			}
		});

		Array.from(toolCategorySections).forEach(toolCategorySection => {
			if (categoryName === toolCategorySection.getAttribute('data-tool-category')) {
				toolCategorySection.classList.remove('active');
				toolCategorySection.classList.add('active');
			} else {
				toolCategorySection.classList.remove('active');
			}
		});
	}

	const setButtonActive = (toolName, mouseButtonMask, toolInteraction) => {
		const toolButtons = document.querySelectorAll('a[data-tool]');

		Array.from(toolButtons).forEach(toolBtn => {
			// Classes we need to set & remove
			let mouseButtonIcon = `mousebutton-${mouseButtonMask}`;
			let touchIcon = `touch-1`

			// Update classes depending on the toolInteraction we clicked
			if (toolInteraction === 'none') {
				return;
			} else if (toolInteraction === 'multitouch') {
				mouseButtonIcon = null;
				touchIcon = 'touch-2';
			} else if (toolInteraction === 'pinch') {
				mouseButtonIcon = null;
				touchIcon = 'touch-pinch';
			} else if (toolInteraction === 'wheel') {
				mouseButtonIcon = 'mousebutton-wheel';
				touchIcon = null;
			}

			// Update our target button
			if (toolName === toolBtn.getAttribute('data-tool')) {
				toolBtn.className = "";
				toolBtn.classList.add('active');
				if (mouseButtonIcon) {
					toolBtn.classList.add(mouseButtonIcon)
				}
				if (touchIcon) {
					toolBtn.classList.add(touchIcon)
				}
				// Remove relevant classes from other buttons
			} else {
				if (mouseButtonIcon && toolBtn.classList.contains(mouseButtonIcon)) {
					toolBtn.classList.remove(mouseButtonIcon);
				}
				if (touchIcon && toolBtn.classList.contains(touchIcon)) {
					toolBtn.classList.remove(touchIcon);
				}
				if (toolBtn.classList.length === 1 && toolBtn.classList[0] === 'active') {
					toolBtn.classList.remove('active');
				}
			}
		});
	}

	const setButtonInActive = (toolBtn, mouseButtonMask, toolInteraction) => {
		let mouseButtonIcon = `mousebutton-${mouseButtonMask}`;
		let touchIcon = `touch-1`

		// Update classes depending on the toolInteraction we clicked
		if (toolInteraction === 'none') {
			return;
		} else if (toolInteraction === 'multitouch') {
			mouseButtonIcon = null;
			touchIcon = 'touch-2';
		} else if (toolInteraction === 'pinch') {
			mouseButtonIcon = null;
			touchIcon = 'touch-pinch';
		} else if (toolInteraction === 'wheel') {
			mouseButtonIcon = 'mousebutton-wheel';
			touchIcon = null;
		}

		if (mouseButtonIcon && toolBtn.classList.contains(mouseButtonIcon)) {
			toolBtn.classList.remove(mouseButtonIcon);
		}
		if (touchIcon && toolBtn.classList.contains(touchIcon)) {
			toolBtn.classList.remove(touchIcon);
		}
		if (toolBtn.classList.length === 1 && toolBtn.classList[0] === 'active') {
			toolBtn.classList.remove('active');
		}
	}



	init();

</script>

</html>